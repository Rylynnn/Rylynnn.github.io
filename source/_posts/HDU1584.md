---
title: HDU1584 蜘蛛牌 
date: 2016-04-16 03:40:00
categories:
- 搜索
- 普通搜索
- DFS
tags:
- HDU
toc: true
---

[原题](http://acm.hdu.edu.cn/showproblem.php?pid=1584)


## 题意

蜘蛛纸牌，同一花色的10张牌，随机地排列在一行上展开，整理成从小到大有序的一列，求最小移动距离。


## 分析

首先，对于所有的数反映射，记录其位置，然后，DFS出所有可能性（用全排列的思想），对于每一次移动，进行决策，使其移动到只比他大1的纸牌上（这个纸牌很可能已经移动，故追踪至未被移动过的根纸牌），决策完十次后，进行判断，每次取最小。


```
/*
T1:dfs中j的循环没有break出去。
*/
#include <bits/stdc++.h>
#define MAX 0x3f3f3f3f
using namespace std;
int ans;
int vis[13],a[13];
void dfs(int cnt,int sum){
    if(sum>ans){
        return;
    }
    if(cnt==10){
        ans=sum;
        //printf("%d ",ans);
        return;
    }
    for(int i=1;i<=10;i++){//每个点都可能开始，这样可以做出所有的可能性(全排列思想)
        if(!vis[i]){
            vis[i]=1;
            for(int j=i+1;j<=10;j++){
                if(!vis[j]){
                    dfs(cnt+1,sum+fabs(a[i]-a[j]));
                    break;
                }
            }
            vis[i]=0;//回溯
        }
    }
}
int main()
{
    int t,x;
    scanf("%d",&t);
    while(t--){
        for(int i=1;i<=10;i++){
            scanf("%d",&x);
            a[x]=i;
        }
        memset(vis,0,sizeof(vis));
        ans=MAX;
        dfs(1,0);
        printf("%d\n",ans);
    }
    return 0;
}
```