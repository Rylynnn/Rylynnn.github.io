---
title: java高精度
date: 2016-12-23 
categories:
- 其他
- 高精度
tags:
- 学习笔记
- Templates
toc: true
---

## JAVA类库
Java类库提供了高精度运算的类java.math.BigInteger和java.math.BigDecimal，这样我们在比赛时就可以使用这两个类完成高精度计算的要求。
BigInteger用于任意精度的整数的运算：
例：
BigInteger x = new BigInteger(“11111111111111111111111111111111111111”);
BigInteger y = new BigInteger(“22222343259435894305894301243”);
System.out.println(x.add(y));
BigInteger类：
abs()       返回其值是此BigInteger的绝对值的BigInteger。
compareTo(BigInteger val) 将此BigInteger与指定的BigInteger进行比较。
divide(BigInteger val)  返回其值为 (this / val) 的BigInteger。
pow(int exponent)  返回其值为 (thisexponent) 的BigInteger。
multiply(BigInteger val)  返回其值为 (this * val) 的BigInteger。
gcd(BigInteger val) 返回一个 BigInteger，其值是 abs(this) 和 abs(val) 的最大公约数。
subtract(BigInteger val) 返回其值为 (this - val) 的 BigInteger。
BigDecimal类：
BigDecimal(String val) 
          将 BigDecimal 的字符串表示形式转换为 BigDecimal。
abs() 
          返回 BigDecimal，其值为此 BigDecimal 的绝对值，其标度为 this.scale()。
add(BigDecimal augend) 
          返回一个 BigDecimal，其值为 (this + augend)，其标度为 max(this.scale(), augend.scale())。
compareTo(BigDecimal val) 
          将此 BigDecimal 与指定的 BigDecimal 比较。
divide(BigDecimal divisor, int scale, int roundingMode) 
          返回一个 BigDecimal，其值为 (this / divisor)，其标度为指定标度。
       RoundingMode
CEILING 
          向正无限大方向舍入的舍入模式。
DOWN 
          向零方向舍入的舍入模式。
FLOOR 
          向负无限大方向舍入的舍入模式。
HALF_DOWN 
          向最接近数字方向舍入的舍入模式，如果与两个相邻数字的距离相等，则向下舍入。
HALF_EVEN 
          向最接近数字方向舍入的舍入模式，如果与两个相邻数字的距离相等，则向相邻的偶数舍入。
HALF_UP 
          向最接近数字方向舍入的舍入模式，如果与两个相邻数字的距离相等，则向上舍入。
UNNECESSARY 
          用于断言请求的操作具有精确结果的舍入模式，因此不需要舍入。
UP 
          远离零方向舍入的舍入模式。
setScale(int newScale, RoundingMode roundingMode) 
          返回 BigDecimal，其标度为指定值，其非标度值通过此 BigDecimal 的非标度值乘以或除以十的适当次幂来确定，以维护其总值。
subtract(BigDecimal subtrahend) 
          返回一个 BigDecimal，其值为 (this - subtrahend)，其标度为 max(this.scale(), subtrahend.scale())。
divide(BigDecimal divisor, RoundingMode roundingMode) 
          返回一个 BigDecimal，其值为 (this / divisor)，其标度为 this.scale()。

```
1. 输入：  
  
格式为：Scanner cin = new Scanner (new BufferedInputStream(System.in));  
  
例程：  
  
import java.io.*;  
  
import java.math.*;  
  
import java.util.*;  
  
import java.text.*;  
  
public class Main  
  
{  
  
    public static void main(String[] args)   
  
    {  
  
        Scanner cin = new Scanner (new BufferedInputStream(System.in));  
  
        int a; double b; BigInteger c; String st;  
  
        a = cin.nextInt(); b = cin.nextDouble(); c = cin.nextBigInteger(); d = cin.nextLine(); // 每种类型都有相应的输入函数.  
  
    }  
  
}  
  
   
  
2. 输出  
  
函数：System.out.print(); System.out.println(); System.out.printf();  
  
System.out.print(); // cout << …;  
  
System.out.println(); // cout << … << endl;  
  
System.out.printf(); // 与C中的printf用法类似.  
  
例程：  
  
import java.io.*;  
  
import java.math.*;  
  
import java.util.*;  
  
import java.text.*;  
  
public class Main  
  
{  
  
    public static void main(String[] args)   
  
    {  
  
        Scanner cin = new Scanner (new BufferedInputStream(System.in));  
  
        int a; double b;  
  
        a = 12345; b = 1.234567;  
  
        System.out.println(a + " " + b);  
  
        System.out.printf("%d %10.5f\n", a, b); // 输入b为字宽为10，右对齐，保留小数点后5位，四舍五入.  
  
    }  
  
}  
  
规格化的输出：  
  
函数：  
  
// 这里0指一位数字，#指除0以外的数字(如果是0，则不显示),四舍五入.  
  
    DecimalFormat fd = new DecimalFormat("#.00#");  
  
    DecimalFormat gd = new DecimalFormat("0.000");  
  
    System.out.println("x =" + fd.format(x));  
  
    System.out.println("x =" + gd.format(x));  
  
   
  
3. 字符串处理  
  
java中字符串String是不可以修改的，要修改只能转换为字符数组.  
  
例程：  
  
import java.io.*;  
  
import java.math.*;  
  
import java.util.*;  
  
import java.text.*;  
  
public class Main  
  
{  
  
    public static void main(String[] args)   
  
    {  
  
        int i;  
  
        Scanner cin = new Scanner (new BufferedInputStream(System.in));  
  
        String st = "abcdefg";  
  
        System.out.println(st.charAt(0)); // st.charAt(i)就相当于st[i].  
  
        char [] ch;  
  
        ch = st.toCharArray(); // 字符串转换为字符数组.  
  
        for (i = 0; i < ch.length; i++) ch[i] += 1;  
  
        System.out.println(ch); // 输入为“bcdefgh”.  
  
if (st.startsWith("a")) // 如果字符串以'0'开头.  
  
        {  
  
            st = st.substring(1); // 则从第1位开始copy(开头为第0位).  
  
        }  
  
    }  
  
}  
  
   
  
4. 高精度  
  
BigInteger和BigDecimal可以说是acmer选择java的首要原因。  
  
函数：add, subtract, divide, mod, compareTo等，其中加减乘除模都要求是BigInteger(BigDecimal)和BigInteger(BigDecimal)之间的运算，所以需要把int(double)类型转换为BigInteger(BigDecimal)，用函数BigInteger.valueOf().  
  
例程：  
  
import java.io.*;  
  
import java.math.*;  
  
import java.util.*;  
  
import java.text.*;  
  
public class Main  
  
{  
  
    public static void main(String[] args)   
  
    {  
  
        Scanner cin = new Scanner (new BufferedInputStream(System.in));  
  
        int a = 123, b = 456, c = 7890;  
  
        BigInteger x, y, z, ans;  
  
        x = BigInteger.valueOf(a); y = BigInteger.valueOf(b); z = BigInteger.valueOf(c);  
  
        ans = x.add(y); System.out.println(ans);  
  
        ans = z.divide(y); System.out.println(ans);  
  
        ans = x.mod(z); System.out.println(ans);  
  
        if (ans.compareTo(x) == 0) System.out.println("1");  
  
    }  
  
}  
  
   
  
5. 进制转换  
  
java很强大的一个功能。  
  
函数：  
  
String st = Integer.toString(num, base); // 把num当做10进制的数转成base进制的st(base <= 35).  
  
int num = Integer.parseInt(st, base); // 把st当做base进制，转成10进制的int(parseInt有两个参数,第一个为要转的字符串,第二个为说明是什么进制).     
  
BigInter m = new BigInteger(st, base); // st是字符串，base是st的进制.  
  
//Added by abilitytao  
  
1.如果要将一个大数以2进制形式读入 可以使用cin.nextBigInteger(2);   
  
当然也可以使用其他进制方式读入；  
  
2.如果要将一个大数转换成其他进制形式的字符串 使用cin.toString(2);//将它转换成2进制表示的字符串  
  
例程：POJ 2305  
  
   
  
import java.io.*;  
  
import java.util.*;  
  
import java.math.*;  
  
public class Main  
  
{  
  
    public static void main(String[] args)  
  
    {  
  
        int b;  
  
        BigInteger p,m,ans;  
  
        String str ;  
  
        Scanner cin = new Scanner (new BufferedInputStream(System.in));  
  
        while(cin.hasNext())  
  
        {  
  
            b=cin.nextInt();  
  
            if(b==0)  
  
                break;  
  
            p=cin.nextBigInteger(b);  
  
            m=cin.nextBigInteger(b);  
  
            ans=p.mod(m);  
  
            str=ans.toString(b);  
  
            System.out.println(str);  
  
        }  
  
    }  
  
}  
  
//End by abilitytao  
  
   
  
6. 排序  
  
函数：Arrays.sort();至于怎么排序结构体，像C++里写个cmp的方法，在java还不太清楚，希望有人指点下～～  
  
例程：  
  
import java.io.*;  
  
import java.math.*;  
  
import java.util.*;  
  
import java.text.*;  
  
public class Main  
  
{  
  
    public static void main(String[] args)   
  
    {  
  
        Scanner cin = new Scanner (new BufferedInputStream(System.in));  
  
        int n = cin.nextInt();  
  
        int a[] = new int [n];  
  
        for (int i = 0; i < n; i++) a[i] = cin.nextInt();  
  
        Arrays.sort(a);  
  
        for (int i = 0; i < n; i++) System.out.print(a[i] + " ");  
  
    }  
  
}  
  
```
